<!-- **************************************************************************
#
# Copyright  (c) 2004-2010 Oracle Corporation.
#
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Eclipse Public License v1.0
# which accompanies this distribution, and is available at
# http://www.eclipse.org/legal/epl-v10.html
#
# Contributors: 
#
#    Alan Harder
#        
#
#************************************************************************** --> 


<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define" xmlns:l="/lib/layout" xmlns:t="/lib/hudson" xmlns:f="/lib/form">
<l:layout title="Testing dropdownList in repeatable">
  <l:main-panel>
    <form method="post" name="config" action="submitTest">
      <f:repeatable var="fruity" items="${it.list}" name="items">
        <table>
          <f:dropdownList name="fruit" title="Fruits">
            <j:forEach var="descriptor" items="${it.fruitDescriptors}" varStatus="loop">
              <j:set var="fruit" value="${descriptor==fruity.fruit.descriptor?fruity.fruit:null}"/>
              <f:dropdownListBlock title="${descriptor.displayName}" value="${loop.index}"
                         selected="${fruit!=null}" staplerClass="${descriptor.clazz.name}">
                <st:include page="${descriptor.configPage}" from="${descriptor}"/>
              </f:dropdownListBlock>
            </j:forEach>
          </f:dropdownList>
          <f:entry title="Word">
            <f:textbox name="word" value="${fruity.word}"/>
          </f:entry>
        </table>
      </f:repeatable>
      <f:submit value="submit"/>
    </form>
  </l:main-panel>
</l:layout>
</j:jelly>
